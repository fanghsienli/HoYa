<div fxLayout="row"
     fxLayout.xs="column"
     fxFlexFill>
    <mat-card *ngIf="enquiryGeneral" fxFlex="30" fxFlex.xs="100" [class.mat-elevation-z8]="true">
        <mat-card-title>詢價細節</mat-card-title>
        <mat-card-content>
            <mat-form-field class="full-width" appearance="outline">
                <mat-label>詢價單號</mat-label>
                <input matInput placeholder="詢價單號" [(ngModel)]="enquiryGeneral.process.no" disabled />
            </mat-form-field>
            <mat-form-field class="full-width" appearance="outline">
                <mat-label>客戶名稱</mat-label>
                <input matInput placeholder="客戶名稱" [(ngModel)]="enquiryGeneral.customerName" disabled />       
                <button matSuffix mat-icon-button (click)="profileCreateDialog()">
                    <mat-icon>chevron_right</mat-icon>
                </button>
            </mat-form-field>
            <mat-form-field class="full-width" appearance="outline">
                <mat-label>聯絡方式</mat-label>
                <input matInput placeholder="聯絡方式" [(ngModel)]="enquiryGeneral.contactValue" disabled />
            </mat-form-field>
            <mat-form-field class="full-width" appearance="outline">
                <mat-label>聯絡窗口</mat-label>
                <input matInput placeholder="聯絡窗口" [(ngModel)]="enquiryGeneral.contactPerson" disabled />
                
            </mat-form-field>
            <mat-form-field class="full-width" appearance="outline">
                <mat-label>詢價內容</mat-label>
                <textarea matInput placeholder="詢價內容"
                          [(ngModel)]="enquiryGeneral.content"
                          cdkTextareaAutosize
                          cdkAutosizeMinRows="10"
                          cdkAutosizeMaxRows="200" disabled></textarea>
            </mat-form-field>
        </mat-card-content>

    </mat-card>
    <mat-card fxFlex.xs="100" fxFlex [class.mat-elevation-z8]="true">

        <mat-card-title>詢價項目</mat-card-title>

        <mat-card-content style="margin: 12px 0px 64px 0px">
            <!-- <mat-form-field style="margin-right: 16px; width: calc(100% - 116px)">
            <input type="text" placeholder="Pick one" aria-label="Number" matInput>
        </mat-form-field>-->
            <button mat-raised-button color="primary" style="position: absolute; top: 16px; right: 16px; height: 32px; width: 100px" (click)="enquiryAppendDialog()" align="end">新增</button>
            <mat-table [dataSource]="enquiriesDataSource" matSort #sortTable="matSort" (matSortChange)="changeSort($event)" [class.mat-elevation-z8]="true">
                <ng-container matColumnDef="materialValue">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>品項</mat-header-cell>
                    <mat-cell *matCellDef="let enquiry">{{ enquiry?.material?.value }}</mat-cell>
                </ng-container>
                <ng-container matColumnDef="quantity">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>數量</mat-header-cell>
                    <mat-cell *matCellDef="let enquiry">{{ enquiry?.quantity }}</mat-cell>
                </ng-container>
                <ng-container matColumnDef="management">
                    <mat-header-cell *matHeaderCellDef></mat-header-cell>
                    <mat-cell *matCellDef="let enquiry">
                      <button mat-icon-button (click)="removeEnquiry(enquiry?.id)"><mat-icon>delete</mat-icon></button>  
                    </mat-cell>
                </ng-container>
                <mat-header-row *matHeaderRowDef="['materialValue', 'quantity', 'management']"></mat-header-row>
                <mat-row matRipple *matRowDef="let selectedEnquiry; columns: ['materialValue', 'quantity', 'management']"></mat-row>
            </mat-table>
        </mat-card-content>
        <mat-card-actions style="position: absolute; bottom: 20px; right: 20px" align="end">
            <button mat-button color="primary" type="submit" (click)="save()"><mat-icon>check</mat-icon> 送出</button>
            <button mat-button color="accent" type="submit" (click)="save()"><mat-icon>save_alt</mat-icon> 儲存</button>
            <button mat-button color="warn" type="submit" [routerLink]="['/', 'views', 'enquiries', 'list']"><mat-icon>redo</mat-icon> 取消</button>
        </mat-card-actions>
    </mat-card>
</div>