<div fxLayout="row"
     fxLayout.xs="column"
     fxFlexFill>
    <mat-card *ngIf="inquiryGeneral" fxFlex="30" fxFlex.xs="100" [class.mat-elevation-z8]="true">
        <mat-card-title>詢價細節</mat-card-title>
        <mat-card-content>
            <mat-form-field class="full-width" appearance="outline">
                <mat-label>客戶名稱</mat-label>
                <input matInput placeholder="客戶名稱" [(ngModel)]="inquiryGeneral.customer.value"/>                
            </mat-form-field>
            <mat-form-field class="full-width" appearance="outline">
                <mat-label>客戶統編</mat-label>
                <input matInput placeholder="客戶統編" [(ngModel)]="inquiryGeneral.customer.code" />
            </mat-form-field>
            <mat-form-field class="full-width" appearance="outline">
                <mat-label>聯絡方式</mat-label>
                <input matInput placeholder="聯絡方式" [(ngModel)]="inquiryGeneral.contact.value" />                
            </mat-form-field>
            <mat-form-field class="full-width" appearance="outline">
                <mat-label>聯絡窗口</mat-label>
                <input matInput placeholder="聯絡窗口" [(ngModel)]="inquiryGeneral.contact.owner.value" />
                <button matSuffix mat-icon-button (click)="profileAppendDialog()">
                    <mat-icon>edit</mat-icon>
                </button>
            </mat-form-field>
            <mat-form-field class="full-width" appearance="outline">
                <mat-label>詢價內容</mat-label>
                <textarea matInput placeholder="詢價內容"
                          [(ngModel)]="inquiryGeneral.value"
                          cdkTextareaAutosize
                          cdkAutosizeMinRows="10"
                          cdkAutosizeMaxRows="200"></textarea>
            </mat-form-field>
        </mat-card-content>

    </mat-card>
    <mat-card fxFlex.xs="100" fxFlex [class.mat-elevation-z8]="true">

        <mat-card-title>詢價項目</mat-card-title>

        <mat-card-content style="margin: 12px 0px 64px 0px">
            <!-- <mat-form-field style="margin-right: 16px; width: calc(100% - 116px)">
            <input type="text" placeholder="Pick one" aria-label="Number" matInput>
        </mat-form-field>-->
            <button mat-raised-button color="primary" style="position: absolute; top: 16px; right: 16px; height: 32px; width: 100px" (click)="inquiryAppendDialog()" align="end">新增</button>
            <mat-table [dataSource]="inquiriesDataSource" matSort #sortTable="matSort" (matSortChange)="changeSort($event)" [class.mat-elevation-z8]="true">
                <ng-container matColumnDef="recipeValue">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>品項</mat-header-cell>
                    <mat-cell *matCellDef="let inquiry">{{ inquiry?.recipe?.value }}</mat-cell>
                </ng-container>
                <ng-container matColumnDef="quantity">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>數量</mat-header-cell>
                    <mat-cell *matCellDef="let inquiry">{{ inquiry?.quantity }}</mat-cell>
                </ng-container>
                <ng-container matColumnDef="price">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>期望單價</mat-header-cell>
                    <mat-cell *matCellDef="let inquiry">
                        <span *ngIf="inquiry?.price">$&nbsp;</span>{{ inquiry?.price }}
                    </mat-cell>
                </ng-container>
                <ng-container matColumnDef="delivery">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>期望交期</mat-header-cell>
                    <mat-cell *matCellDef="let inquiry">{{ inquiry?.delivery }}</mat-cell>
                </ng-container>
                <ng-container matColumnDef="more">
                    <mat-header-cell *matHeaderCellDef></mat-header-cell>
                    <mat-cell *matCellDef="let inquiry">
                        <button mat-icon-button (click)="removeInquiry(inquiry?.id)"><mat-icon>delete</mat-icon></button>
                    </mat-cell>
                </ng-container>
                <mat-header-row *matHeaderRowDef="['recipeValue', 'quantity', 'price', 'delivery', 'more']"></mat-header-row>
                <mat-row matRipple *matRowDef="let selectedInquiry; columns: ['recipeValue', 'quantity', 'price', 'delivery', 'more']"></mat-row>
            </mat-table>
        </mat-card-content>
        <mat-card-actions style="position: absolute; bottom: 20px; right: 20px" align="end">
            <button mat-button color="primary" type="submit" (click)="save()"><mat-icon>check</mat-icon> 送出</button>
            <button mat-button color="accent" type="submit" (click)="save()"><mat-icon>save_alt</mat-icon> 儲存</button>
            <button mat-button color="warn" type="submit" [routerLink]="['/', 'views', 'inquiries', 'generals']"><mat-icon>redo</mat-icon> 取消</button>
        </mat-card-actions>
    </mat-card>
</div>